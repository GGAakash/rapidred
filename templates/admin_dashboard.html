{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="card p-4">

<h2 class="text-danger">Admin Dashboard</h2>

<div class="row mt-3">
    <div class="col-md-4">
        <div class="card p-3 text-center">
            <h5>Total Donors</h5>
            <h2 class="text-primary">{{ total_donors }}</h2>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card p-3 text-center">
            <h5>Total Requests</h5>
            <h2 class="text-primary">{{ total_requests }}</h2>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card p-3 text-center">
            <h5>Open Requests</h5>
            <h2 class="text-primary">{{ open_requests }}</h2>
        </div>
    </div>
</div>

<h4 class="mt-4">Recent Requests</h4>

<table class="table table-bordered">
    <tr><th>ID</th><th>Patient</th><th>Blood</th><th>Created</th><th>Status</th></tr>
    {% for r in recent_requests %}
    <tr>
        <td>{{ r.id }}</td>
        <td>{{ r.patient_name }}</td>
        <td>{{ r.required_blood_group }}</td>
        <td>{{ r.created_at }}</td>
        <td>{{ r.status }}</td>
    </tr>
    {% endfor %}
</table>

<a href="/admin/map" class="btn btn-secondary mt-3">üìç Open Real-time Donor Map</a>

</div>
{% endblock %}
